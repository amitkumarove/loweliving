function dataVisible(){function e(e){e.attr("data-visible","visible")}var t=$(document).scrollTop()+1*$(window).height();$("[data-visible], .data-visible").each(function(i,a){a=$(a);var o=a.attr("data-trigger")?$(a.attr("data-trigger")):a;!("visible"==a.attr("data-visible")||"delayed"==a.attr("data-visible"))&&t>o.offset().top&&(a.attr("data-visible-delay")?(a.attr("data-visible","delayed"),setTimeout(e,a.attr("data-visible-delay"),a)):e(a))})}function init(){var e=[{featureType:"landscape.man_made",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"landscape.man_made",elementType:"geometry.fill",stylers:[{lightness:"27"}]},{featureType:"landscape.natural.terrain",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi.attraction",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"poi.business",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"poi.government",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"poi.medical",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{visibility:"simplified"},{lightness:"24"}]},{featureType:"poi.park",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi.place_of_worship",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"poi.school",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"poi.sports_complex",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{visibility:"simplified"},{lightness:"0"},{gamma:"1"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"simplified"},{lightness:"0"}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{visibility:"simplified"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{lightness:"0"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{lightness:"0"}]},{featureType:"road.highway.controlled_access",elementType:"geometry.fill",stylers:[{saturation:"0"},{lightness:"0"}]},{featureType:"road.highway.controlled_access",elementType:"geometry.stroke",stylers:[{lightness:"0"}]},{featureType:"road.highway.controlled_access",elementType:"labels",stylers:[{lightness:"0"}]},{featureType:"road.arterial",elementType:"geometry.fill",stylers:[{lightness:"66"}]},{featureType:"road.arterial",elementType:"geometry.stroke",stylers:[{lightness:"50"},{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"labels",stylers:[{lightness:"47"}]},{featureType:"road.local",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"labels.icon",stylers:[{saturation:"-100"}]},{featureType:"transit.line",elementType:"labels.icon",stylers:[{saturation:"-100"}]},{featureType:"transit.station",elementType:"labels.text",stylers:[{visibility:"simplified"},{color:"#787878"}]},{featureType:"transit.station",elementType:"labels.icon",stylers:[{saturation:"-100"},{visibility:"simplified"}]},{featureType:"water",elementType:"all",stylers:[{lightness:"39"}]}];if(jQuery("#map").length){var t=[],i=0,a=0,o=$("#map .map-pin");o.each(function(){var e=new google.maps.LatLng($(this).data("latitude"),$(this).data("longitude"));i+=e.lat(),a+=e.lng(),t.push({location:e,icon:$(this).data("pin"),parent:$(this).data("parent")})});var s=new google.maps.LatLng(i/o.length,a/o.length),l={zoom:13,draggable:!1,scrollwheel:!1,zoomControl:!0,streetViewControl:!1,mapTypeControl:!1,center:s,styles:e},n=document.getElementById("map"),r=new google.maps.Map(n,l);for(var c in t){var d=new google.maps.Marker({position:t[c].location,icon:t[c].icon,map:r});d.addListener("click",function(){r.setCenter(this.position),r.setZoom(15)}),$(t[c].parent).prop("_marker",d)}window.addEventListener("resize",function(){r.setCenter(s)}),$(".tile.location").click(function(){var e=$(this).prop("_marker");e&&(r.setCenter(e.position),r.setZoom(15))})}}function checkIfEdge(){window.navigator.userAgent.indexOf("Edge")>-1&&$("html").addClass("edge")}function checkHeaderScrollPos(){var e=$(window).scrollTop(),t=($(window).height(),$(".landing").outerHeight()-200),i=$("header");$(document.body).hasClass("single-post")&&(t=50),e>t&&i.hasClass("collapsed")?i.removeClass("collapsed"):e<t&&!i.hasClass("collapsed")&&i.addClass("collapsed")}function profileTiles(){var e=$("header.top-header"),t=e.outerHeight(),i=$(".profile-tiles");if(i.each(function(){var e=$(this),i=e.find(".profile-tile");i.each(function(){var a=$(this),o=e.find(".profile-tile--details");a.on("click",function(e){e.stopPropagation(),e.preventDefault();var s=a.next();s.hasClass("expanded")?(a.removeClass("active"),s.removeClass("expanded")):(o.removeClass("expanded"),i.removeClass("active"),a.addClass("active"),s.addClass("expanded"),setTimeout(function(){var e=a.offset().top,i=s.offset().top,o=(s.outerHeight(),$(window).scrollTop());$(window).innerHeight();o+t<e&&$("html, body").animate({scrollTop:e-t},200)},500)),s.find(".close-trigger").on("click",function(e){e.stopPropagation(),e.preventDefault(),s.removeClass("expanded")})})})}),i.length){checkProfileHeight();var a;$(window).on("resize orientationchange",function(){clearTimeout(a),a=setTimeout(function(){checkProfileHeight()},500)})}}function checkProfileHeight(){$("html").attr("style","");var e=Math.max.apply(null,$(".profile-label-wrapper").map(function(){return $(this).outerHeight()}).get());$("html").attr("style","--profile-label-height:"+e+"px;")}function fullcoverVideos(){function e(e,t,i){var a=e.parents(".landing"),o=a.outerWidth(),s=a.outerHeight();s/o>i/t?(e.width(t*(s/i)),e.height(s),e.css("top",0),e.css("left",(o-e.width())/2)):(e.width(o),e.height(i*(o/t)),e.css("top",(s-e.height())/2),e.css("left",0))}$(".landing .iframe-wrap").each(function(){var t=$(this),i=t.find("iframe");i.length&&e(t,i.attr("width"),i.attr("height"))})}function initVideo(){var e=$("#testimonials .video-section");e.length&&e.each(function(){var e=$(this),t=e.find("iframe").first(),i=e.find(".video-section__overlay");if(t&&t.length>0)if(-1!==t[0].src.indexOf("vimeo")){var a=new Vimeo.Player(t);i&&i.on("click",function(t){e.addClass("active"),$(this).fadeOut(),a.play()})}else-1!==t[0].src.indexOf("youtube")&&i&&i.on("click",function(a){e.addClass("active"),t[0].src+="&autoplay=1",setTimeout(function(){i.fadeOut()},500)})})}$(document).scroll(dataVisible),$(window).resize(dataVisible),dataVisible(),jQuery(document).ready(function(e){var t=!1;e(document.body).hasClass("page-template-home")&&e(window).on("wheel",function(i){var a=i.originalEvent.deltaY>0,o=e(window).scrollTop();if(a&&o<=10&&!t){e(document.body).addClass("scroll-locked"),t=!0;var s=e(window).height(),l=e("section.landing");if(l.length){var n=l.nextAll("section:first");if(n.length){var r=e("header.top-header");s=n.offset().top,s-=r.outerHeight()}}e("body,html").animate({scrollTop:s},{duration:1e3,complete:function(){t=!1,e(document.body).removeClass("scroll-locked")}})}})}),jQuery(document).ready(function(e){function t(){var t=e(".motif").not(".motif--single"),i=e(window).scrollTop(),a=e(window).height();t.each(function(){var t=e(this),o=t.children(".motif__wrap"),s=t.offset().top-a,l=t.offset().top+t.height(),n=l-s,r=(i-s)/n,c=50*r-25;o.css("transform","translateY("+-1*c+"%)"),o.children(".motif__inner").css("transform","translateY("+c+"%)"),o.children(".motif__outer").css("transform","translateY("+c+"%)")})}e(window).scroll(function(){window.requestAnimationFrame(t)}),window.requestAnimationFrame(t)}),google.maps.event.addDomListener(window,"load",init),$(document).ready(function(e){function t(){return e(this).is(""==n?"*":n)}function i(){var t=e(this);t.toggleClass("placeholder",t.children("option:first-child").is(":selected"))}function a(t){e(".loading-gif").addClass("in"),e(".sub-error").slideUp(),e("#subscription-options button").prop("disabled",!0),e("#unsubscribe-all").prop("disabled",!0);var i=e.urlParam("n");i||(i=""),e.ajax({url:_ajaxurl,data:{action:"cm_update_preferences",formdata:JSON.stringify(t),email:e.urlParam("e"),name:i},type:"POST"}).done(function(t){e(".loading-gif").removeClass("in"),e(".form-wrap").slideUp(300,function(){e(".thank-you").slideDown()}),e("#subscription-options button").prop("disabled",!1),e("#unsubscribe-all").prop("disabled",!1)})}if(checkIfEdge(),checkHeaderScrollPos(),profileTiles(),initVideo(),fullcoverVideos(),e(window).resize(fullcoverVideos),e(".slick").slick({slidesToShow:1,slidesToScroll:1,pauseOnHover:!1,pauseOnFocus:!1,infinite:!0,dots:!0,adaptiveHeight:!0,arrows:!0,prevArrow:'<button type="button" class="slick-prev"><img src="'+_imagedir+'/arrow-left.png"/><span class="sr-only">Previous</span></button>',nextArrow:'<button type="button" class="slick-next"><img src="'+_imagedir+'/arrow-right.png"/><span class="sr-only">Next</span></button>'}).on("beforeChange",function(t,i,a,o){a!=o&&e(this).find(".slick-arrow").addClass("active")}),e(window).scroll(function(){checkHeaderScrollPos()}),e("[data-toggle='menu']").click(function(){var t=e(".header-menu ul");e(document.body).toggleClass("menu-active"),t.slideToggle(400,function(){"none"==t.css("display")&&t.css("display","")})}),e(document.body).hasClass("post-type-archive-project")){if(window.location.hash.length>1){var o=e("section.projects .filters a[data-filter='."+window.location.hash.slice(1)+"']");o.length&&(o.parent().parent().find(".active").removeClass("active"),o.addClass("active"))}var s=e(".division-filters .active").data("filter"),l=e(".status-filters .active").data("filter"),n=("*"==s?"":s)+("*"==l?"":l),r=e(".isotope").isotope({itemSelector:".isotope-item",layoutMode:"fitRows",percentPosition:!0,filter:t});e(".filters a").click(function(i){i.preventDefault(),window.location.hash="",e(this).parent().parent().find(".active").removeClass("active"),e(this).addClass("active"),s=e(".division-filters .active").data("filter"),l=e(".status-filters .active").data("filter"),n=("*"==s?"":s)+("*"==l?"":l),r.isotope({filter:t})})}e("button.load-more").click(function(){e.ajax({url:_ajaxurl,method:"GET",data:{action:"load_more",paged:++_paged,ishome:_ishome,queryvars:_queryvars},success:function(t){var i=e(".tile.post"),a=window.pageYOffset||document.documentElement.scrollTop,o=i.length;i.parents(".wrapper-latestnews").append(t),document.documentElement.scrollTop=a,i.length-o<_postsperpage&&(e(".loadmore button").remove(),e(".loadmore").append('<span class="button">NO MORE POSTS</span>'))}})}),e(".wpcf7-form").submit(function(){e('button[type="submit"]',this).text("SENDING...").attr("disabled",!0)}),e(".wpcf7").each(function(){this.addEventListener("wpcf7mailsent",function(t){if(e('button[type="submit"]',t.target).text("SENT!").attr("disabled",!1),e(this).closest(".sideform__form, .newsletter").length)setTimeout(function(){window.location.href="/thank-you/subscribed"},3e3);else{var i=e(this).find('input[name="on_success_url"]');i.length?setTimeout(function(){window.location.href=i.val()},3e3):setTimeout(function(){window.location.href="/thank-you"},3e3)}},!1)}),e(".wpcf7").each(function(){this.addEventListener("wpcf7invalid",function(t){e('button[type="submit"]',t.target).text("SUBMIT").attr("disabled",!1)},!1)}),e(".sideform__tab").click(function(){e(this).closest(".sideform").toggleClass("active")}),e(document).click(function(t){e(t.target).closest(".sideform").length||e(".sideform").removeClass("active")}),(e(document.body).hasClass("blog")||e(document.body).hasClass("archive"))&&e("select").select2({minimumResultsForSearch:1/0}),e(document).on("click",'[data-toggle="lightbox"]',function(t){t.preventDefault(),e(this).ekkoLightbox()}),e("#projectEnquiry").submit(function(t){t.preventDefault();var i=e(this).find("[name]"),a=e(this).find("button"),o=a.text();a.prop("original-label",o),a.text("SENDING..");var s={action:"project_enquiry"};e("#projectEnquiry .response-output").css("display","none"),e(this).find(".wpcf7-not-valid").removeClass("wpcf7-not-valid");var l=!1;if(i.each(function(){this.value?s[e(this).attr("name")]=this.value:(l=!0,e(this).addClass("wpcf7-not-valid")),"checkbox"==e(this).attr("type")&&(e(this).is(":checked")||(s[e(this).attr("name")]=!1))}),l)return void a.text(o);e.ajax({url:_ajaxurl,method:"POST",data:s,success:function(t){var i=e("#projectEnquiry button");i.text(i.prop("original-label")?i.prop("original-label"):"SUBMIT"),e("#projectEnquiry .response-output").css("display",""),e("#projectEnquiry input").val("")}})}),e('a[href*="#"]').click(function(t){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var i=e(this.hash);if(i=i.length?i:e('[name="'+this.hash.slice(1)+'"]'),i.length){if(i.is("#search-box"))i.slideToggle();else{if(i.is(".modal"))return;var a=e("header.top-header"),o=i.offset().top-a.outerHeight();e("html, body").animate({scrollTop:o},1e3)}return!1}}t.preventDefault()}),e("[data-section-scroll]").each(function(){var t=e(this),i=t.is("[data-scroll-ignore-header]");t.on("click",function(a){var o=t.closest("section");if(o.length){var s=o.nextAll("section:first");if(s.length){var l=e("header.top-header"),n=s.offset().top;l.length&&!i&&(n-=l.outerHeight()),e("html, body").animate({scrollTop:n},1e3)}}a.preventDefault(),a.stopPropagation()})}),e(document.body).hasClass("page-template-about"),e('input[type="file"]').on("change",function(t){var i=e(this).val().split("\\").pop();e(this).closest(".wpcf7-form-control-wrap").siblings(".input-file-selection").text(i)}),e("select.has-placeholder").each(i).on("change",i),e(".landing .carousel-wrap").slick({fade:!0,infinite:!0,slidesToShow:1,arrows:!1,dots:!1,autoplay:!0,autoplaySpeed:3e3,pauseOnHover:!1,pauseOnFocus:!1}),e("#subscription-options").submit(function(t){t.preventDefault();var i=e("#subscription-options").serializeArray();e('input[type="checkbox"]:not(:checked)',this).each(function(){"unsuball"!==e(this).attr("id")&&i.push({name:this.name,value:"unsubscribe"})}),a(i)})}),$.urlParam=function(e){var t=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null==t?null:decodeURI(t[1])||0};